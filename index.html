<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>RipFit / FutureBody 3.5 Animated Edition</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://unpkg.com/lottie-web"></script>
<style>
body {
  font-family: 'Poppins', sans-serif;
  margin: 0;
  background: radial-gradient(circle at center, #0a0a0a, #000);
  color: white;
  text-align: center;
  overflow-x: hidden;
}
h1 {
  color: #00eaff;
  text-shadow: 0 0 12px #00eaff;
}
#energyBarContainer {
  width: 80%;
  background: #222;
  border-radius: 20px;
  height: 20px;
  margin: 15px auto;
  position: relative;
}
#energyBar {
  height: 100%;
  background: linear-gradient(90deg, #00ff88, #00eaff);
  width: 80%;
  transition: width 0.3s ease;
}
#snack {
  position: absolute;
  right: -40px;
  top: -2px;
  font-size: 24px;
  cursor: pointer;
}
button {
  background: linear-gradient(90deg, #ff0080, #7928ca);
  color: white;
  border: none;
  border-radius: 25px;
  padding: 8px 16px;
  margin: 5px;
  cursor: pointer;
  font-weight: 600;
}
#avatar {
  width: 300px;
  margin: 20px auto;
}
#popup {
  position: absolute;
  background: rgba(0,0,0,0.85);
  border: 1px solid #00eaff;
  border-radius: 10px;
  padding: 10px;
  display: none;
  z-index: 20;
}
#chartContainer {
  width: 90%;
  margin: 20px auto;
  display: none;
}
canvas {
  background: #111;
  border-radius: 10px;
}
</style>
</head>
<body>
<h1>üèãÔ∏è‚Äç‚ôÇÔ∏è RipFit / FutureBody 3.5</h1>

<div id="energyBarContainer">
  <div id="energyBar"></div>
  <div id="snack" onclick="eatSnack()">üç´</div>
</div>
<p id="energyText">‚ö° Energy: 80%</p>
<p id="feedback">Let‚Äôs make today count!</p>

<div id="avatar"></div>

<div>
  <button onclick="startDay()">Start Day</button>
  <button onclick="finalizeDay()">Finalize Day</button>
  <button onclick="toggleChart()">üìà Progress</button>
</div>

<div id="popup"></div>
<div id="chartContainer"><canvas id="progressChart" height="180"></canvas></div>

<script>
const muscles = ["chest", "biceps", "abs", "shoulders", "legs"];
let data = JSON.parse(localStorage.getItem("lottieMuscles") || "{}");
if (Object.keys(data).length === 0) muscles.forEach(m => data[m] = { reps: 0, size: 10, history: [] });
let energy = JSON.parse(localStorage.getItem("energyLevel") || "80");
let day = JSON.parse(localStorage.getItem("currentDay") || "1");
let chart;

// Load Lottie animation
let animation = lottie.loadAnimation({
  container: document.getElementById('avatar'),
  renderer: 'svg',
  loop: true,
  autoplay: true,
  path: 'animations/human.json'
});

function updateEnergy() {
  document.getElementById("energyBar").style.width = energy + "%";
  document.getElementById("energyText").innerText = `‚ö° Energy: ${energy}%`;
  let fb = "üí™ Feeling strong!";
  if (energy < 40) fb = "ü•± Low energy! Eat something.";
  else if (energy > 90) fb = "üî• You‚Äôre unstoppable!";
  document.getElementById("feedback").innerText = fb;
}

function showPopup(e, m) {
  const popup = document.getElementById("popup");
  popup.style.left = e.pageX + "px";
  popup.style.top = e.pageY + "px";
  popup.innerHTML = `<b>${m.toUpperCase()}</b><br>Reps: ${data[m].reps}<br>
  <button onclick="train('${m}',5)">+ Rep</button>
  <button onclick="train('${m}',-5)">‚Äì Rep</button>`;
  popup.style.display = "block";
}
window.addEventListener("click", e => {
  if (!e.target.closest("#popup")) document.getElementById("popup").style.display = "none";
});

function train(m, val) {
  let factor = 1;
  if (energy < 40) factor = 0.5;
  else if (energy > 80) factor = 1.2;
  data[m].reps = Math.max(0, data[m].reps + val);
  data[m].size = Math.min(200, data[m].size + 5 * factor);
  energy = Math.max(0, energy - 3);
  pulse(m);
  updateEnergy();
  saveData();
}

function pulse(m) {
  document.getElementById("feedback").innerText = `${m.toUpperCase()} engaged!`;
}

function eatSnack() {
  energy = Math.min(100, energy + 15);
  document.getElementById("feedback").innerText = "üç´ Protein boost!";
  updateEnergy();
  saveData();
}

function startDay() {
  energy = 80;
  day++;
  document.getElementById("feedback").innerText = "üí™ Day started fresh!";
  updateEnergy();
  saveData();
}

function finalizeDay() {
  muscles.forEach(m => {
    data[m].history.push(data[m].size);
    if (data[m].history.length > 90) data[m].history.shift();
    data[m].size *= 0.97;
  });
  energy = Math.max(0, energy - 10);
  updateEnergy();
  saveData();
  alert("Day finalized. Progress saved.");
}

function toggleChart() {
  const c = document.getElementById("chartContainer");
  c.style.display = c.style.display === "none" ? "block" : "none";
  if (c.style.display === "block") drawChart();
}

function drawChart() {
  const ctx = document.getElementById("progressChart").getContext("2d");
  if (chart) chart.destroy();
  chart = new Chart(ctx, {
    type: "line",
    data: {
      labels: Array.from({length: Math.max(...muscles.map(m => data[m].history.length))}, (_,i)=>i+1),
      datasets: muscles.map((m,i)=>({
        label: m,
        data: data[m].history,
        borderColor: ["#00eaff","#ff0080","#ffd700","#00ff88","#ff6600"][i],
        fill: false
      }))
    },
    options: {
      scales: { y: { beginAtZero: true, max: 200 } },
      plugins: { legend: { labels: { color: "#fff" } } }
    }
  });
}

function saveData() {
  localStorage.setItem("lottieMuscles", JSON.stringify(data));
  localStorage.setItem("energyLevel", JSON.stringify(energy));
  localStorage.setItem("currentDay", JSON.stringify(day));
}
updateEnergy();
</script>
</body>
</html>

